<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <link rel="stylesheet" href="./52.instagram.css">


</head>

<body>
    <header>
        <div class="container">

            <div class="row justify-content-between">
                <div class="logo">
                    <img src="https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png"
                        alt="">
                </div>
                <div class="search-input">
                    <input type="text" placeholder="搜尋">
                </div>
                <div class="login-area">
                    <button class="btn btn-primary btn-sm">登入</button>
                    <button class="btn linl-primary btn-sm">註冊</button>
                </div>
            </div>

        </div>
    </header>

    <main>
        <div class="container">
            <div class="row">
                <div class="personal-img-area col-3">
                    <div class="personal-img">
                        <img src="https://instagram.ftpe7-4.fna.fbcdn.net/v/t51.2885-19/s320x320/116870895_2761740814046919_412789886659001746_n.jpg?_nc_ht=instagram.ftpe7-4.fna.fbcdn.net&_nc_ohc=QKrIf4vHhXIAX-3GLQZ&oh=3e3fdc846a0fd52d3c2b1e6a1fe90b9e&oe=5F8BA8CB"
                            alt="">
                    </div>
                </div>

                <div class="personal-info-area col-5">
                    <div class="first-row">
                        <span class="username">gqtaiwan</span>
                        <span class="check"></span>

                        <a href="" class="btn btn-primary btn-sm">追蹤</a>
                    </div>
                    <div class="sec-row d-flex mt-3">
                        <div class="post">
                            <span class="post-number font-weight-bold">1111</span>
                            <span>貼文</span>
                        </div>
                        <div class="follower">
                            <span class="follower-number font-weight-bold">15.3</span>
                            <span>萬</span>
                        </div>
                        <div class="following">
                            <span class="following-number font-weight-bold font-weight-bold">94</span>
                            <span>追蹤中</span>
                        </div>
                    </div>
                    <div class="third-row mt-3 ">
                        <p class="user-fullname font-weight-bold">GQ Taiwan</p>
                        <p class="info-text">
                            To become a better man, follow GQ Taiwan.
                        </p>
                        <p>更多精彩內容請至</p>
                        <p>gq.com.tw/instagram</p>
                    </div>
                </div>
            </div>
            <div class="row hightlight justify-content-around">
                <!-- .circle*7>(img+p) -->
                <!-- <div class="circle">
                    <img src="https://instagram.ftpe7-4.fna.fbcdn.net/v/t51.2885-15/s150x150/118748532_234361727934347_3731186177358460157_n.jpg?_nc_ht=instagram.ftpe7-4.fna.fbcdn.net&_nc_ohc=-xJC-2s34eoAX9aZQL-&oh=62fc3bef24adb483c3ab9e9f91175494&oe=5F8AFFE7"
                        alt="">
                    <p class="font-weight-bold mt-2 text-center small text-truncate">封面人物</p>
                </div> -->
                <!-- 我們拿到ajax,result可以拿到edges,拿到一堆 hightlight的陣列，用迴圈跑一遍拿到裡面的東西，用attr,url，append-->
                <!-- <div class="circle">
                    <img src="https://instagram.ftpe7-4.fna.fbcdn.net/v/t51.2885-15/s150x150/118748532_234361727934347_3731186177358460157_n.jpg?_nc_ht=instagram.ftpe7-4.fna.fbcdn.net&_nc_ohc=-xJC-2s34eoAX9aZQL-&oh=62fc3bef24adb483c3ab9e9f91175494&oe=5F8AFFE7"
                        alt="">
                    <p class="font-weight-bold mt-2 text-center small text-truncate ">社群風格人物</p>
                </div> -->
                <!-- <div class="circle">
                    <img src="" alt="">
                    <p></p>
                </div> -->
            </div>

            <div class="row justify-content-center">
                <div class="pageLink small font-weight-bold">貼文</div>
                <div class="pageLink small font-weight-bold">IGTV</div>
                <div class="pageLink small font-weight-bold">已標註</div>
            </div>

            <div class="row content-area">
                <!--測試用
                     <div class="col-4 position-relative overflow-hidden p-4">
                            <img
                              src="https://instagram.ftpe7-4.fna.fbcdn.net/v/t51.2885-15/fr/e15/s1080x1080/119459958_170285457935801_2553482051621743888_n.jpg?_nc_ht=instagram.ftpe7-4.fna.fbcdn.net&_nc_cat=105&_nc_ohc=orxpPjLZOywAX-H5jtR&oh=95b46a1f408ac924369f0ed2836a1b96&oe=5F8D0951"
                              alt=""
                            />
                          </div>
                          <div class="col-4 position-relative overflow-hidden p-4">
                            <img
                              src="https://instagram.ftpe7-4.fna.fbcdn.net/v/t51.2885-15/fr/e15/s1080x1080/119459958_170285457935801_2553482051621743888_n.jpg?_nc_ht=instagram.ftpe7-4.fna.fbcdn.net&_nc_cat=105&_nc_ohc=orxpPjLZOywAX-H5jtR&oh=95b46a1f408ac924369f0ed2836a1b96&oe=5F8D0951"
                              alt=""
                            />
                          </div>
                          <div class="col-4 position-relative overflow-hidden p-4">
                            <img
                              src="https://instagram.ftpe7-4.fna.fbcdn.net/v/t51.2885-15/fr/e15/s1080x1080/119459958_170285457935801_2553482051621743888_n.jpg?_nc_ht=instagram.ftpe7-4.fna.fbcdn.net&_nc_cat=105&_nc_ohc=orxpPjLZOywAX-H5jtR&oh=95b46a1f408ac924369f0ed2836a1b96&oe=5F8D0951"
                              alt=""
                            />
                          </div> -->
            </div>

            <div class="row p-4 position-relative">
                <div class="">
                    <p class="pl-3 text-secondary font-weight-bold small">相關帳號</p>
                </div>
                <div class="relative-accounts d-flex">
                    <!-- <div class="cards border px-2 pt-2 pb-4 mx-3">
                        <span class="float-right">X</span>
                        <div class="card-img-area mx-auto mt-3">

                            <img src="https://instagram.ftpe7-4.fna.fbcdn.net/v/t51.2885-19/s150x150/58423666_471599293577750_2888674099960217600_n.jpg?_nc_ht=instagram.ftpe7-4.fna.fbcdn.net&_nc_ohc=jw3ldWWuvOcAX9IMjkD&oh=c6986450c549cb265cb66dc4a7200b73&oe=5F8BB84C"
                                alt="">
                        </div>
                        <p class="font-weight-bold text-truncate mt-3 mb-1 small text-center">
                            thatmrwang
                        </p>

                        <p class="text-center text-truncate mb-3 small">XXX</p>
                        <button class="btn btn-primary w-100 btn-sm">追蹤</button>

                    </div> -->
                </div>

                <a role="button"
                    class="relative-btn-right d-flex justify-content-center align-items-center text-decoration-none">
                    右
                </a>

                <a role="button"
                    class="relative-btn-left d-flex justify-content-center align-items-center text-decoration-none">
                    左
                </a>
            </div>
        </div>
    </main>


    <script src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script>

        // $.ajax({
        //     method: "GET",
        //     url: "https://www.instagram.com/gqtaiwan/?__a=1",  //網址加上?__a=1可以拿到他的API
        //     // context: document.body
        // }).done(function (result) {
        //     console.log("user_img", result.graphql.user.profile_pic_url_hd);
        //     // $(this).addClass("done");

        //     let userPic = result.graphql.user.profile_pic_url_hd;
        //     $(".personal-img img").attr("src", userPic);
        // });

        //短時間內取太多次資料的話，Instagram會用ddos阻斷服務攻擊擋你。
        //performance  command+shift+p>打full 可以選擇全螢幕截圖。

        $.ajax({
            method: "GET",
            url: "http://192.168.27.35:3000/ig2",
        }).done(function (result) {
            console.log("result", result.data.user.edge_highlight_reels.edges);
            let highlightArray = result.data.user.edge_highlight_reels.edges;

            for (let i = 0; i < highlightArray.length; i++) {
                let htmlString = `<div class="circle">
                    <img src="${highlightArray[i].node.cover_media_cropped_thumbnail.url}"
                        alt="${highlightArray[i].node.title}">
                    <p class="font-weight-bold mt-2 text-center small text-truncate">封面人物</p>
                </div>`;
                $(".hightlight").append(htmlString);
            }

            console.log(result, result.data.user.edge_chaining.edges);

            let chainingArray = result.data.user.edge_chaining.edges;
            for (let i = 0; i < chainingArray.length; i++) {
                let htmlString = `<div class="cards border px-2 pt-2 pb-4 mx-3">
                        <span class="float-right">X</span>
                        <div class="card-img-area mx-auto mt-3">

                            <img src="${chainingArray[i].node.profile_pic_url}"
                                alt="">
                        </div>
                        <p class="font-weight-bold text-truncate mt-3 mb-1 small text-center">
                            ${chainingArray[i].node.username}
                        </p>

                        <p class="text-center text-truncate mb-3 small">${chainingArray[i].node.full_name}</p>
                        <button class="btn btn-primary w-100 btn-sm">追蹤</button>

                    </div>`
                $(".relative-accounts").append(htmlString);
            }



            // let highlightArray = result.graphql.user.edge_highlight_reels.edges;

            // for (i=0; i < highlightArray.length; i++){
            //     $('.highlight').append('<div class="circle">
            //       <img src="url" alt="">
            //       <p>title</p>
            //   </div>')

            // }

            // let userPic = result.graphql.user.profile_pic_url_hd;

            //   $(".personal-img img").attr("src", userPic);
        });

        //改id可以拿貼文


        $.ajax({
            method: "GET",
            url: "http://192.168.27.35:3000/ig3",
        }).done(function (result) {
            console.log("result", result.data.user.edge_owner_to_timeline_media.edges);

            let articleArray = result.data.user.edge_owner_to_timeline_media.edges;

            for (let i = 0; i < articleArray.length; i++) {
                let htmlString = `
                <div class="col-4 position-relative overflow-hidden p-4 content">
                    <img src="${articleArray[i].node.display_url}" alt="">
                </div>
            </div>`;
                $(".content-area").append(htmlString);
            }
        });

        // let highlightArray = result.graphql.user.edge_highlight_reels.edges;

        // for (i=0; i < highlightArray.length; i++){
        //     $('.highlight').append('<div class="circle">
        //       <img src="url" alt="">
        //       <p>title</p>
        //   </div>')

        // }

        // let userPic = result.graphql.user.profile_pic_url_hd;

        //   $(".personal-img img").attr("src", userPic);



        $(".relative-btn-left").addClass("hide");

        let scrollLeft = 0;
        $(".relative-btn-right").click(function () {
            console.log(scrollLeft);
            $(".relative-accounts").animate({ scrollLeft: '+=500' }, 'slow');
            scrollLeft += 500;
            if (scrollLeft > 499) {
                console.log(scrollLeft);
                $(".relative-btn-left").removeClass("hide");
            }
        });

        $(".relative-btn-left").click(function () {
            $(".relative-accounts").animate({ scrollLeft: '-=500' }, 'slow');
            scrollLeft -= 500;
            console.log(scrollLeft);
            if (scrollLeft === 0) {
                console.log(scrollLeft);
                $(".relative-btn-left").addClass("hide");

            }

        });




        // let scrollLeft = 0;
        // $(".relative-btn-right").click(function () {
        //     scrollLeft += 100;
        //     $(".relative-accounts").scrollLeft(scrollLeft);

        //     if (scrollLeft > 0) $(".relative-btn-left").removeClass("hide");
        // });

        // $(".relative-btn-left").click(function () {
        //     scrollLeft -= 100;
        //     $(".relative-accounts").scrollLeft(scrollLeft);

        //     if (scrollLeft === 0) $(".relative-btn-left").addClass("hide");
        // });




    </script>
</body>

</html>